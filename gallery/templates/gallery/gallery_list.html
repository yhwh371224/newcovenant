{% extends 'gallery/base.html' %}

{% block content %}
<section class="page-section" id="subpages">
    <div class="container">
        <div class="row">
            <div class="col-md-12" id="main-div">
                <nav class="navbar navbar-expand-lg navbar-light" id="mainNav" style="background-color: transparent !important;">
                    <div class="container-fluid">
                        <div class="collapse navbar-collapse" id="navbarResponsive">
                            <ul class="navbar-nav me-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="#">사진들</a>
                                </li>
                            </ul>
                            <span class="navbar-text mx-auto text-center" style="font-size: 1.7rem; font-weight: bold;">
                                새언약교회 사진첩
                            </span>
                            <ul class="navbar-nav ms-auto">
                                <li class="nav-item">
                                    {% if user.is_authenticated %}
                                        <button class="btn btn-success btn-sm" onclick="location.href='/gallery/create/'">사진올리기</button>
                                    {% endif %}
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
            <div class="row" id="photo-grid">                
                {% if object_list %}
                {% for p in object_list %}
                    <div class="col-md-3 mb-4">
                        <div class="card" id="post-card-{{ p.pk }}">
                            <div class="image-container">
                                {% if p.head_image %}
                                    <a href="{{ p.get_absolute_url }}">
                                        <img class="card-img-top" src="{{ p.head_image.url }}" alt="Card image cap">
                                    </a>
                                {% else %}
                                    <a href="{{ p.get_absolute_url }}">
                                        <img class="card-img-top" src="https://picsum.photos/700/300/?random" alt="Card image cap">
                                    </a>
                                {% endif %}
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">{{ p.title | striptags | truncatewords_html:8 }}</h5>
                            </div>
                        </div>
                        
                    </div>
                {% endfor %}
                
                {% if is_paginated %}
                    <div class="pagination mt-4 text-center" style="font-size: small;">
                        <span class="page-links">
                            {% if page_obj.has_previous %}
                                <a href="?page=1">[처음페이지]&nbsp;&nbsp;</a>
                                <a href="?page={{ page_obj.previous_page_number }}">next&nbsp;&nbsp;</a>
                            {% endif %}
                            
                            <span class="current-page">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
                            
                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}">&nbsp;&nbsp;previous</a>
                                <a href="?page={{ page_obj.paginator.num_pages }}">&nbsp;&nbsp;[끝페이지]</a>
                            {% endif %}
                        </span>
                    </div>
                {% endif %}

            {% else %}
                <h5 class="text-center">No Photos</h5>
            {% endif %}                
            </div>
        </div>                
    </div>
</section>

<style>
    /* 이미지 컨테이너 스타일 */
    .image-container {
        width: 100%;
        height: 200px; /* 고정된 높이 */
        overflow: hidden; /* 넘치는 이미지를 숨김 */
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #f8f9fa; /* 배경색 추가 (옵션) */
    }
    
    /* 이미지 스타일 */
    .card-img-top {
        width: 100%;
        height: 100%;
        object-fit: cover; /* 이미지를 고정된 크기로 조정 */
    }
    #subpages {
        margin-top: 10px ; /* 간격을 줄임 */
    }
    .image-container img:hover {
        opacity: 0.8;
        transition: opacity 0.3s ease;
        cursor: pointer; /* 클릭 가능한 요소임을 나타냄 */
    }
    .card-title {
        font-size: 1rem;  /* 기본 크기보다 작은 크기 */
    }

    </style>
    


{% endblock %}
